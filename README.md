# 薪マップ 🪵 - 薪の販売場所共有アプリ

薪の販売場所を地図上で共有できるプログレッシブWebアプリケーション（PWA）です。キャンプや薪ストーブユーザーが薪の販売場所を登録・検索・共有できます。

## 🎯 プロジェクト概要

**薪マップ**は、薪の販売場所を地図上にマーカーで表示し、誰でも簡単に薪を購入できる場所を見つけられるようにするWebアプリケーションです。PWA対応により、スマートフォンのホーム画面に追加してネイティブアプリのように使用できます。

## ✨ 実装済み機能

### 📍 地図表示機能
- **OpenStreetMap**を使用した無料の地図表示
- 薪販売場所をカスタムマーカー（🔥アイコン）で表示
- 現在地の自動取得と表示
- マーカークリックでポップアップ表示（場所名、薪の種類、価格）
- 地図のズーム・移動操作

### 📝 薪販売場所の登録機能
- **場所名**: 販売所の名称
- **薪の種類**: ナラ、クヌギ、スギなど
- **価格**: 1束500円、10kg 2000円など
- **住所**: 販売場所の住所
- **位置情報**: 緯度・経度（現在地取得ボタンで自動入力可能）
- **連絡先**: 電話番号やメールアドレス
- **備考**: 営業時間やその他の情報

### 🔍 検索・フィルター機能
- 薪の種類でフィルタリング
- キーワード検索（場所名、備考）
- フィルタークリア機能

### 📱 リスト表示機能
- 登録された販売場所の一覧表示
- カード形式の見やすいレイアウト
- リストパネルの開閉機能
- カードクリックで詳細表示

### 📖 詳細情報表示
- 各販売場所の詳細情報をモーダルで表示
- 地図で確認ボタンで該当場所にフォーカス

### 📱 PWA機能
- オフライン対応（Service Worker）
- ホーム画面への追加
- スタンドアロンモード
- アプリアイコン設定

### 🎨 レスポンシブデザイン
- PC、タブレット、スマートフォンに対応
- モバイルファーストデザイン
- タッチ操作最適化

## 🏗️ 技術スタック

### フロントエンド
- **HTML5**: セマンティックマークアップ
- **CSS3**: カスタムプロパティ、グリッドレイアウト、アニメーション
- **JavaScript (ES6+)**: Async/Await、Fetch API、DOM操作

### ライブラリ・API
- **[Leaflet.js 1.9.4](https://leafletjs.com/)**: オープンソース地図ライブラリ
- **[OpenStreetMap](https://www.openstreetmap.org/)**: 無料の地図タイル
- **[Font Awesome 6.4.0](https://fontawesome.com/)**: アイコンフォント
- **[Google Fonts - Noto Sans JP](https://fonts.google.com/)**: 日本語Webフォント

### バックエンド・データ管理
- **RESTful Table API**: プラットフォーム提供のデータ永続化API
- **テーブル**: `firewood_locations`
- **完全無料**: サーバー費用不要

### PWA技術
- **Service Worker**: キャッシュ戦略とオフライン対応
- **Web App Manifest**: アプリメタデータとアイコン
- **Geolocation API**: 位置情報取得

## 📂 プロジェクト構造

```
/
├── index.html              # メインHTMLファイル
├── manifest.json           # PWAマニフェスト
├── service-worker.js       # Service Worker
├── css/
│   └── style.css          # メインスタイルシート
├── js/
│   └── app.js             # アプリケーションロジック
└── README.md              # プロジェクトドキュメント
```

## 🗄️ データモデル

### firewood_locations テーブル

| フィールド名 | 型 | 説明 |
|------------|-----|------|
| id | text | レコードID（自動生成） |
| location_name | text | 場所名（例：〇〇薪販売所） |
| wood_type | text | 薪の種類（例：ナラ、クヌギ、スギ） |
| price | text | 価格情報（例：1束500円、10kg 2000円） |
| address | text | 住所 |
| latitude | number | 緯度 |
| longitude | number | 経度 |
| contact | text | 連絡先（電話番号、メールアドレス等） |
| notes | text | 備考（営業時間、その他情報） |

### システムフィールド（自動管理）
- `gs_project_id`: プロジェクト識別子
- `gs_table_name`: テーブル名
- `created_at`: 作成日時（ミリ秒）
- `updated_at`: 更新日時（ミリ秒）

## 🚀 使い方

### 1. 薪販売場所の登録
1. 右上の **「新規登録」** ボタンをクリック
2. 必須項目（場所名、薪の種類、価格、緯度・経度）を入力
3. **「現在地を取得」** ボタンで位置情報を自動入力（推奨）
4. その他の情報（住所、連絡先、備考）を入力
5. **「登録」** ボタンをクリック

### 2. 薪販売場所の検索
1. 左上の **「フィルター」** ボタンをクリック
2. 薪の種類やキーワードを入力
3. **「検索」** ボタンをクリック
4. 地図とリストに結果が表示されます

### 3. 詳細情報の確認
- 地図上のマーカーをクリック → ポップアップで基本情報表示
- リストのカードをクリック → 詳細情報モーダル表示
- 詳細モーダルの **「地図で確認」** ボタンで地図にフォーカス

### 4. PWAとして使用
1. スマートフォンのブラウザでアプリを開く
2. ブラウザメニューから **「ホーム画面に追加」** を選択
3. ホーム画面のアイコンからアプリを起動

## 🔌 API エンドポイント

### GET /tables/firewood_locations
全ての薪販売場所を取得

**クエリパラメータ:**
- `page`: ページ番号（デフォルト: 1）
- `limit`: 取得件数（デフォルト: 100）
- `search`: キーワード検索

**レスポンス:**
```json
{
  "data": [...],
  "total": 50,
  "page": 1,
  "limit": 100,
  "table": "firewood_locations",
  "schema": {...}
}
```

### GET /tables/firewood_locations/{id}
特定の薪販売場所を取得

**レスポンス:**
```json
{
  "id": "uuid",
  "location_name": "〇〇薪販売所",
  "wood_type": "ナラ、クヌギ",
  "price": "1束500円",
  ...
}
```

### POST /tables/firewood_locations
新しい薪販売場所を登録

**リクエストボディ:**
```json
{
  "location_name": "〇〇薪販売所",
  "wood_type": "ナラ、クヌギ",
  "price": "1束500円",
  "latitude": 35.681236,
  "longitude": 139.767125,
  "address": "東京都千代田区...",
  "contact": "090-1234-5678",
  "notes": "営業時間: 9:00-17:00"
}
```

## 💰 無料運用について

このアプリは完全無料で運用できます：

### 無料コンポーネント
- ✅ **OpenStreetMap**: 無料の地図タイル
- ✅ **Leaflet.js**: オープンソースの地図ライブラリ
- ✅ **RESTful Table API**: プラットフォーム提供の無料データベース
- ✅ **Font Awesome**: 無料版アイコン
- ✅ **Google Fonts**: 無料Webフォント
- ✅ **静的ホスティング**: サーバーレス構成

### 制限事項
- OpenStreetMapの利用規約に従う必要があります
- 大量アクセス時は独自タイルサーバーの検討が必要な場合があります
- RESTful Table APIの無料枠の制限（プラットフォームにより異なる）

## 🔮 今後の実装予定機能

### 優先度: 高
- [ ] 販売場所の編集・削除機能
- [ ] ユーザー認証（投稿者管理）
- [ ] 画像アップロード機能（薪の写真）
- [ ] 営業時間の構造化データ入力
- [ ] レビュー・評価機能

### 優先度: 中
- [ ] お気に入り機能
- [ ] 共有機能（SNS連携）
- [ ] ルート検索（現在地から販売場所へ）
- [ ] 在庫状況の表示
- [ ] 通知機能（新規登録時）

### 優先度: 低
- [ ] 多言語対応
- [ ] ダークモード
- [ ] データエクスポート機能
- [ ] 統計情報の表示
- [ ] 管理者ダッシュボード

## 🛠️ 開発推奨事項

### 次のステップ
1. **ユーザー認証の実装**: 投稿の信頼性向上
2. **画像アップロード**: 薪の写真で情報を充実
3. **編集・削除機能**: データメンテナンス機能
4. **レビュー機能**: ユーザー体験の共有
5. **在庫状況**: リアルタイム在庫情報

### 技術的改善
- TypeScriptへの移行（型安全性向上）
- 状態管理ライブラリの導入（React/Vue.js等）
- ユニットテスト・E2Eテストの追加
- パフォーマンス最適化（画像遅延読み込み等）
- SEO対策（メタタグ、構造化データ）

## 📝 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🤝 貢献

バグ報告や機能リクエストは大歓迎です！プルリクエストもお待ちしています。

## 📞 サポート

問題が発生した場合は、GitHubのIssueセクションで報告してください。

---

**薪マップ** - キャンプと薪ストーブライフをもっと便利に 🔥🪵
